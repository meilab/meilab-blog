---
templateKey: dailycoding-post
title: static和变量
date: 2020-10-07T03:47:31.433Z
tags:
  - C
---
我们之前讲解了函数中定义的变量是被分配在堆栈中的，当函数结束之后，堆栈空间会被回收，所以这些局部变量也就不存在了，因此我们不能在函数中返回一个指向该函数局部变量的指针。但是返回函数中定义的变量这个需求是有的。那在C语言中，我们如何实现这个需求呢，我们可以将变量定义为static，这样变量就会被保存在数据段，而不是堆栈中，回忆一下上次讲的内容，一个程序分成文本段，数据段，BSS段，堆栈等。这个变量的生命周期就和程序一样长了，当定义该变量的函数推出时，该变量的值依然能保持。当该函数下一次进入时，该值依然有效。

有人可能会说，我把它定义成全局变量不是一样的效果吗？ 为啥要这么麻烦定义成局部变量，再加上一个static呢？大家想一想，下一期讲一个用途。

在一些高级语言比如JavaScript中，这种需求很常见，在一个函数中访问另一个函数的局部变量，JavaScript通过Closure闭包来实现。